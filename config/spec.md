
仕様記述
--------------------

* 状態 x イベントを網羅チェック
* 数式や仕様記述言語で書いてから自然言語に変換すること(曖昧さがなくかつ実装と突き合わせやすい)
* 機能概要は要求に基づいて記述「～しない/する為の機能」
* 記述から検証が可能になっていること
* アルゴ記述は参考とし、事前・事後条件かいたほうがベター
* 仕様変更チケットにレビューしたい議題を入れてコンセンサスを取る



設計・実装
------------

* リファクタする場合は単体テスト作ってから
** 既存の単体テストがないならvalidationデータをいくつか作れば良い
* 非同期キャンセルはむずい。終了通知とキャンセル通知の行き違いが怖い

* 失敗(事前条件を満たしても事後条件みたせない)はさけられない場合もある(非決定性/IO/割り込み)
** 都合良く事前条件絞る + 失敗を適切にハンドリングすること

* アクターで順序をどう制御するか考えてみる。例えば同じスレッドがalloc/lockとrelease/unlockを行う方が大抵の場合望ましい

* 複雑なものは部分 or 階層に分けれるように工夫する


* 判断基準を明確にしないと、ぐちゃぐちゃになる。時間がないから楽をする、は一度認めると蟻の一穴。
** 後でリファクタ、は明確にいつするか積めないとまずやらないのですぐやった方がいい
** 例外は一個まで、二個目みつけたらリファクタとか

* 蓋(分岐条件)はゆるく(< よりも!=)、場合分けは最小かつオーバーラップしないように

* 代用/流用出来る仕組みや概念がないか検討する
* 逆や双対な概念の操作を試みる(離散・連続etc..)
* 要求に違反しない適切な制約をつけることでスッキリ記述出来ないか？
    * 関数を呼び出す回数や順序やタイミングを制限する
* 事前条件、事後条件、例外(事後条件満たせない場合）
* 内部の詳細がAPIや公開変数を通して外部に漏れていないか？
* 制御レベルの概念が汎用部品の中に浸透していないか？
* 関連する機能との相互作用を確認する

* コメントverification(状態で記述)
    * 何が変わるかだけでなく何が変わらないかも考える
    * 必ず変数の値域をかくことで特殊な場合を考慮する

レビュー
-------

* 仕様がないなら作る
    * 状態とイベント(アトミックか一瞬)

* 使うコマンドのマニュアルは全部読む

* 仕様を見て、イベントに対して事前・事後・不変条件(補題)を把握し、チェックする
    * ガード条件のベン図が必要。複数同時に発生しうる場合に注意する（優先度が重要。ただし挙動が変わらなければ優先度が変わっても良い)
    * 関数レベルの仕様に分解するのが辛い場合、検証視点でテストコードで仕様確認していることをチェック

* 1tokenずつ追うこと（こぴぺミス防止もかねて)
    * resouce new/delete
    * overflow
    * branch/arg/return/error check

* 生存期間(作り方、捨て方、永続化、不変条件)

* 修正はそこだけで良いのか？(参照、名前の統一性、不変条件、etc...)
    * 関連する直近2コミット程度は辿って見直した方が無難

* 無駄に状態やメソッドを増やしていないか？(=消しても平気か？)役割と名前は適切か？
    * 状態の不変条件は変化していないか？変化ささえた場合は整合性は取れているか？
    * 関数の出入り部分、コンテキストスイッチが起こる場合(別スレッド、割り込み)

* 各ステップの異常系は正しくハンドル出来ているか？停止性は？ループの不変条件は？

* 並行に処理が行われ場合意図した順序に実行されるようになっているか？


